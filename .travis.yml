language: php

services:
  - mysql

php:
  - 5.6
  - 7.0

env:
  - WP_PROJECT_TYPE=plugin WP_VERSION=latest WP_MULTISITE=0 WP_TEST_URL=http://0.0.0.0:12000 WP_TEST_USER=admin WP_TEST_USER_PASS=admin

cache:
  directories:
    - vendor
    - $HOME/.composer/cache

install:
  - composer global require "fxp/composer-asset-plugin:~1.1.1"
  - composer self-update
  - composer install --prefer-dist
  - git clone https://github.com/Seravo/wordpress-test-template wp-tests
  - bash wp-tests/bin/install-wp-tests.sh test root '' localhost $WP_VERSION

script:
#  - php ./vendor/bin/codecept run unit
  - php ./vendor/bin/codecept run tests/wpmodule/AdminAccessTest:it_should_be_able_to_visit_the_admin_area_when_unlogged
